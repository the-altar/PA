"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Invulnerability = void 0;
const baseEffect_1 = require("./baseEffect");
const enums_1 = require("../../enums");
class Invulnerability extends baseEffect_1.Effect {
    constructor(data) {
        super(data);
        this.invulnerabilityType = data.invulnerabilityType;
    }
    getInvulnerabilityType() {
        return this.invulnerabilityType;
    }
    execute(targets, skillList) {
        this.tick++;
        if (this.tick % 2 === 0)
            return false;
        this.delay -= 1;
        if (this.delay >= 0)
            return false;
        this.duration -= 1;
        switch (this.behavior) {
            case enums_1.effectTargetBehavior.Default:
                {
                    for (const char of targets) {
                        char.setInvulnerability(this.invulnerabilityType);
                    }
                }
                break;
            case enums_1.effectTargetBehavior.OnlyOne:
                {
                    targets[0].setInvulnerability(this.invulnerabilityType);
                }
                break;
            case enums_1.effectTargetBehavior.AllOthers:
                {
                    for (const char of targets.slice(1, targets.length)) {
                        char.setInvulnerability(this.invulnerabilityType);
                    }
                }
                break;
        }
        if (this.duration <= 0)
            return true;
        return false;
    }
}
exports.Invulnerability = Invulnerability;
//# sourceMappingURL=invulnerability.js.map