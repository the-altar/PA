(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e26d8"],{"7f3f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game"},[i("div",{staticClass:"game__heading"},[i("h1",[t._v(t._s(t.timer))]),t.myturn?i("button",{on:{click:t.endTurn}},[t._v("End turn")]):t._e()]),i("section",{staticClass:"game__battle"},[i("Allies"),i("Enemies")],1),i("div",{staticClass:"infobox"},[i("p",[t._v(" "+t._s(t.selectedSkill.name)+" ")]),i("p",[t._v(" "+t._s(t.selectedSkill.description)+" ")])])])},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game__nav game__nav--ingame"},t._l(t.foes,(function(t,e){return i("div",{key:e,staticClass:"game__charstate"},[i("EffectList",{attrs:{charId:t.id,isEnemy:!0,charIndex:e}}),i("EnemyCharFace",{attrs:{health:t.health,energy:t.energy,facepic:t.facepic,index:e,id:t.id}})],1)})),0)},n=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("article",{staticClass:"game__charface"},[t.targetStatus?i("div",{directives:[{name:"on-click-outside",rawName:"v-on-click-outside",value:t.cancel,expression:"cancel"}],staticClass:"game__char game__char--flip game__char--target",on:{click:function(e){return t.addToSkillQueue()}}},[i("img",{attrs:{src:"/img/game/"+t.facepic+".jpg"}})]):i("div",{staticClass:"game__char game__char--flip",style:{backgroundImage:"url(/img/game/"+t.facepic+".jpg)"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.pop,expression:"pop"}],staticClass:"game__char__icon2 game__char__icon2--enemy",attrs:{src:"/img/game/"+t.facepic+".jpg"}})]),i("Bars",{attrs:{health:t.health,energy:t.energy}})],1)},c=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("div",{staticClass:"game__bar"},[i("p",{staticClass:"game__bar__value",style:{width:t.health+"%"}}),i("p",{staticClass:"game__bar__load"},[t._v(t._s(t.health)+" hp")])]),i("div",{staticClass:"game__bar"},[i("p",{staticClass:"game__bar__value game__bar__value--sp",style:{width:t.energy+"%"}}),i("p",{staticClass:"game__bar__load"},[t._v(t._s(t.energy)+" sp")])])])},u=[],g={props:["health","energy"]},m=g,d=i("2877"),h=Object(d["a"])(m,o,u,!1,null,null,null),f=h.exports,_={props:["index","id","health","energy"],data:function(){return{pop:!1}},methods:{oneEnemy:function(){return[{target:this.id,position:this.index}]},otherAllies:function(t){var e=[],i=this.$store.getters["ingame/getMyFriends"];for(var s in i)i[s].id!==t&&e.push({target:i[s].id,position:s});return e},allAllies:function(){var t=[{target:this.id,position:this.index}],e=this.$store.getters["ingame/getMyFriends"];for(var i in e)e[i].id!==this.id&&t.push({target:e[i].id,position:i});return t},allEnemies:function(){var t=[{target:this.id,position:this.index}],e=this.$store.getters["ingame/getMyFoes"];for(var i in e)e[i].id!==this.id&&t.push({target:e[i].id,position:i});return t},self:function(){return this.oneEnemy()},oneAlly:function(){return this.oneEnemy()},addToSkillQueue:function(){var t=this.$store.getters["targetMode/getSelectedSkillInfo"],e=t.skill.target.type,i=this[e](t.caster),s={skill:t.skill,skillIndex:t.skillIndex,targets:i,caster:t.caster,position:t.position};this.$store.commit("ingame/ADD_TO_SKILL_QUEUE",s),this.$store.commit("targetMode/RESET_STATE",!0,!0)}},watch:{health:function(){this.pop=!0;var t=this;setTimeout((function(){t.pop=!1}),1e3)}}},p={components:{Bars:f},mixins:[_],props:["facepic"],computed:{targetStatus:function(){return this.$store.getters["targetMode/getTargetEnemyStatus"]}},methods:{cancel:function(){this.$store.commit("targetMode/RESET_STATE",{isAlly:!1})}}},k=p,v=Object(d["a"])(k,l,c,!1,null,null,null),y=v.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"effectList"},[t._l(t.activeEffectList(t.charIndex,t.team),(function(e,s){return i("img",{key:s,staticClass:"effectList__icon",class:{"effectList__icon--enemy":t.isEnemy},attrs:{src:"/img/game/"+e.skillInfo.skillpic+".jpg"}})})),t._l(t.effectList(t.charId),(function(e,s){return i("img",{key:s,staticClass:"effectList__icon",class:{"effectList__icon--enemy":t.isEnemy},attrs:{src:"/img/game/"+e.skill.skillpic+".jpg"}})}))],2)},S=[],T={props:["charId","isEnemy","charIndex"],data:function(){return{team:""}},computed:{effectList:function(){return this.$store.getters["ingame/getSkillQueueFilter"]},activeEffectList:function(){return this.$store.getters["ingame/getActiveEffects"]}},created:function(){this.isEnemy?this.team="foes":this.team="friends"}},$=T,C=Object(d["a"])($,E,S,!1,null,null,null),x=C.exports,I={components:{EnemyCharFace:y,EffectList:x},computed:{foes:function(){return this.$store.getters["ingame/getMyFoes"]}}},b=I,A=Object(d["a"])(b,r,n,!1,null,null,null),w=A.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game__nav game__nav--ingame"},t._l(t.friends,(function(t,e){return i("div",{key:e,staticClass:"game__charstate"},[i("CharFace",{attrs:{health:t.health,energy:t.energy,facepic:t.facepic,index:e,id:t.id}}),i("section",{staticClass:"game__status"},[i("EffectList",{attrs:{charId:t.id,isEnemy:!1,charIndex:e}}),i("SkillSet",{attrs:{skills:t.skills,caster:{id:t.id,position:e}}})],1)],1)})),0)},M=[],j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game__skillset"},t._l(t.skills,(function(e,s){return i("SkillIndividual",{key:s,attrs:{skill:e,caster:t.caster,index:s}})})),1)},O=[],F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game__skillset__pic",style:{backgroundImage:"url(/img/game/"+t.skill.skillpic+".jpg)"},on:{click:function(e){return e.target!==e.currentTarget?null:t.selectSkill()}}},[t.selectedSkill.id===t.skill.id?i("img",{staticClass:"game__skillset__pic--pop",attrs:{src:"/img/game/"+t.skill.skillpic+".jpg"}}):void 0!==t.selectedSkill.id&&t.selectedSkill.id!==t.skill.id||t.skill.cooldown>0||!t.myturn||t.character(t.caster.position).energy<t.skill.cost||t.checkReqs?i("span",{staticClass:"game__skillset--disabled",on:{click:function(e){return t.$store.commit("targetMode/SET_SKILL_PREVIEW",t.skill)}}},[t.skill.cooldown>0&&t.myturn?i("p",[t._v(t._s(t.skill.cooldown))]):t._e()]):t._e()])},R=[],Q=(i("caad"),i("2532"),{props:["skill","index","caster"],data:function(){return{offensiveTarget:["oneEnemy","allEnemies"],helpfulTarget:["self","allAllies","oneAlly","otherAllies"]}},computed:{checkReqs:function(){if(void 0!==this.skill.target.reqs)for(var t in this.skill.target.reqs)switch(this.skill.target.reqs[t].param){case"skill":switch(this.skill.target.reqs[t].threshold){case"self":if("Susanoo"in this.$store.getters["ingame/getActiveEffects"](this.caster.position,"friends"))continue;return!0}}return!1},selectedSkill:function(){return this.$store.getters["targetMode/getSelectedSkillInfo"].skill},myturn:function(){return this.$store.getters["ingame/getMyTurn"]},character:function(){return this.$store.getters["ingame/getOneFriendByIndex"]}},methods:{selectSkill:function(){var t={caster:this.caster.id,position:this.caster.position,skill:this.skill,skillIndex:this.index};this.myturn&&this.offensiveTarget.includes(this.skill.target.type)?t.isAlly=!1:this.myturn&&this.helpfulTarget.includes(this.skill.target.type)&&(t.isAlly=!0),this.$store.commit("targetMode/SET_SELECTION",t)}}}),q=Q,B=Object(d["a"])(q,F,R,!1,null,null,null),N=B.exports,U={props:["skills","caster"],components:{SkillIndividual:N}},K=U,D=Object(d["a"])(K,j,O,!1,null,null,null),G=D.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("article",{staticClass:"game__charface"},[t.targetStatus&&t.targetLimit?t.targetStatus&&t.targetLimit?i("div",{directives:[{name:"on-click-outside",rawName:"v-on-click-outside",value:t.cancel,expression:"cancel"}],staticClass:"game__char game__char--target",on:{click:function(e){return t.addToSkillQueue()}}},[i("img",{attrs:{src:"/img/game/"+t.facepic+".jpg"}})]):t._e():i("div",{staticClass:"game__char",style:{backgroundImage:"url(/img/game/"+t.facepic+".jpg)"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.pop,expression:"pop"}],staticClass:"game__char__icon2",attrs:{src:"/img/game/"+t.facepic+".jpg"}})]),i("Bars",{attrs:{energy:t.energy,health:t.health}})],1)},P=[],V={components:{Bars:f},mixins:[_],props:["facepic"],computed:{targetStatus:function(){return this.$store.getters["targetMode/getTargetAllyStatus"]},targetLimit:function(){var t=this.$store.getters["targetMode/getSelectedSkillInfo"];if(void 0===t.skill.target)return!1;if("self"==t.skill.target.type){if(t.caster==this.id)return!0}else if("otherAllies"==t.skill.target.type||"oneAlly"==t.skill.target.type){if(t.caster!=this.id)return!0}else if("allAllies"==t.skill.target.type)return!0;return!1}},methods:{cancel:function(){this.$store.commit("targetMode/RESET_STATE",{isAlly:!0})}}},W=V,z=Object(d["a"])(W,J,P,!1,null,null,null),H=z.exports,X={components:{CharFace:H,SkillSet:G,EffectList:x},computed:{friends:function(){return this.$store.getters["ingame/getMyFriends"]}}},Y=X,Z=Object(d["a"])(Y,L,M,!1,null,null,null),tt=Z.exports,et={components:{Enemies:w,Allies:tt},data:function(){return{timer:60,interval:!1}},sockets:{startTurn:function(t){this.endTimer(),this.$store.commit("ingame/SET_GAME",t),this.timer=60,this.startTimer()},endTurn:function(t){this.endTimer(),this.$store.commit("ingame/RESET_SKILL_QUEUE"),this.$store.commit("ingame/SET_GAME",t),this.$store.commit("targetMode/RESET_STATE",{all:!0}),this.timer=60,this.startTimer()},forcedEndTurn:function(){this.$socket.client.emit("endTurn",[])}},computed:{myturn:function(){return this.$store.getters["ingame/getMyTurn"]},selectedSkill:function(){return this.$store.getters["targetMode/getSkillPreview"]}},methods:{endTurn:function(){this.$socket.client.emit("endTurn",this.$store.getters["ingame/getSkillQueue"])},startTimer:function(){this.interval=setInterval((function(t){t.timer--}),1e3,this)},endTimer:function(){clearInterval(this.interval)}},created:function(){this.startTimer()}},it=et,st=Object(d["a"])(it,s,a,!1,null,null,null);e["default"]=st.exports}}]);
//# sourceMappingURL=chunk-2d0e26d8.aef697a8.js.map