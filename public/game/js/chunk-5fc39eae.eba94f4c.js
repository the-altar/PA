(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fc39eae"],{"0571":function(e,t,s){},"0a92":function(e,t,s){},"13d5":function(e,t,s){"use strict";var i=s("23e7"),r=s("d58f").left,n=s("a640"),a=s("ae40"),c=n("reduce"),l=a("reduce",{1:0});i({target:"Array",proto:!0,forced:!c||!l},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14d0":function(e,t,s){"use strict";var i=s("6f15"),r=s.n(i);r.a},"1ca1":function(e,t,s){"use strict";var i=s("d317"),r=s.n(i);r.a},2928:function(e,t,s){},5259:function(e,t,s){"use strict";var i=s("0a92"),r=s.n(i);r.a},"6f15":function(e,t,s){},"77bb":function(e,t,s){},"8c75":function(e,t,s){"use strict";var i=s("2928"),r=s.n(i);r.a},a434:function(e,t,s){"use strict";var i=s("23e7"),r=s("23cb"),n=s("a691"),a=s("50c4"),c=s("7b0b"),l=s("65f0"),o=s("8418"),u=s("1dde"),m=s("ae40"),g=u("splice"),d=m("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!g||!d},{splice:function(e,t){var s,i,u,m,g,d,y=c(this),k=a(y.length),$=r(e,k),_=arguments.length;if(0===_?s=i=0:1===_?(s=0,i=k-$):(s=_-2,i=f(h(n(t),0),k-$)),k+s-i>p)throw TypeError(v);for(u=l(y,i),m=0;m<i;m++)g=$+m,g in y&&o(u,m,y[g]);if(u.length=i,s<i){for(m=$;m<k-i;m++)g=m+i,d=m+s,g in y?y[d]=y[g]:delete y[d];for(m=k;m>k-i+s;m--)delete y[m-1]}else if(s>i)for(m=k-i;m>$;m--)g=m+i-1,d=m+s-1,g in y?y[d]=y[g]:delete y[d];for(m=0;m<s;m++)y[m+$]=arguments[m+2];return y.length=k-i+s,u}})},ab4e:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ingame"},[s("section",{staticClass:"ingame-header"},[e.GetMyData.isTurn?s("ul",{staticClass:"ingame-header-energypool"},e._l(e.GetMyData.energyPool.slice(0,4),(function(t,i){return s("li",{key:i,class:e.energies[i]+" "+e.energies[i]+"-glow"},[e._v(e._s(t))])})),0):e._e(),e.GetMyData.isTurn?s("button",{on:{click:function(t){return e.endTurn()}}},[e._v("end turn")]):e._e()]),s("section",{staticClass:"ingame-field"},[s("MyTeam",{on:{"selected-a-skill":e.viewerUpdate}}),s("EnemyTeam")],1),s("section",{staticClass:"ingame-footer"},[s("Viewer")],1),e.endturn&&e.GetMyData.isTurn?s("EnergyCart",{attrs:{queue:e.GetMyData.payupCart},on:{endturn:e.endTurn,close:function(t){e.endturn=!1}}}):e._e()],1)},r=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"myteam"},e._l(e.myTeam,(function(t,i){return s("section",{key:i,class:{none:!1===t}},[!1!==t?s("div",{staticClass:"myteam-char"},[s("CharFace",{attrs:{char:t,index:i}}),s("section",[s("div",[e._l(e.tempQueue(i).reverse(),(function(t,i){return s("img",{key:i,staticClass:"tempSkill",attrs:{src:"/img/game/"+e.skill(t.caster,t.skill).skillpic+".jpg"},on:{dblclick:function(s){return e.removeFromTempQueue(t)}}})})),e._l(e.skillQueue(t.id).reverse(),(function(t,i){return s("img",{key:i,staticClass:"tempSkill",attrs:{src:"/img/game/"+t.skillpic+".jpg"},on:{dblclick:function(s){return e.removeFromTempQueue(t)}}})}))],2),e.myData.isTurn?s("Skills",{attrs:{skills:t.skills,charIndex:i},on:{"selected-skill":e.setSkill}}):e._e()],1)],1):e._e()])})),0)},a=[],c=s("5530"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"myteam-char-status"},[s("div",{staticClass:"myteam-char-icons"},[e.char.isTarget?s("img",{staticClass:"pulsate",attrs:{src:"/img/game/"+e.char.facepic+".jpg"},on:{click:function(t){return e.selectTarget()}}}):e._e(),s("img",{class:{fainted:e.char.knockedOut},attrs:{src:"/img/game/"+e.char.facepic+".jpg"}})]),s("div",{staticClass:"myteam-hp"},[s("div",{staticClass:"myteam-hp-value"},[e._v(e._s(e.char.hitPoints))]),s("div",{staticClass:"myteam-hp-gauge",style:"width: "+e.char.hitPoints+"%"})])])},o=[],u={props:["char","index"],methods:{selectTarget:function(){this.$eventBus.$emit("set-target",this.index),this.$store.commit("game/setSkillInFocus",{}),this.$store.commit("game/resetTargetables")}}},m=u,g=s("2877"),d=Object(g["a"])(m,l,o,!1,null,null,null),h=d.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"myteam-skillset"},e._l(e.skills,(function(t,i){return s("div",{key:i,staticClass:"myteam-skillset-skill",on:{click:function(s){return e.emitSelectedSkill(t,i)}}},[e.inFocus===t?s("img",{staticClass:"pulsate myteam-skillset-skill-icon",attrs:{src:"/img/game/"+t.skillpic+".jpg"}}):e._e(),s("img",{staticClass:"myteam-skillset-skill-icon",class:{fade:t.disabled},attrs:{src:"/img/game/"+t.skillpic+".jpg"}})])})),0)},p=[],v={props:["skills","charIndex"],methods:{emitSelectedSkill:function(e,t){e.disabled||(this.$store.commit("game/setSkillInFocus",e),this.$store.commit("game/setTargetables",e.targetChoices),this.$emit("selected-skill",{skill:t,caster:this.charIndex})),this.$eventBus.$emit("selected-a-skill",e)}},computed:{inFocus:function(){return this.$store.state.game.skillInFocus}}},y=v,k=Object(g["a"])(y,f,p,!1,null,null,null),$=k.exports,_={CharFace:h,Skills:$},C=function(){var e=this.$store.state.user.id;return this.$store.getters["game/getMyCharList"](e)},b=function(){var e=this.$store.state.user.id;return this.$store.getters["game/GetMyData"](e)},T=function(){return this.$store.getters["game/getTempQueueByCharacter"]},x=function(){return this.$store.getters["game/getSkillByCaster"]},w=function(){return this.$store.getters["game/getSkillQueueById"]},S={skill:x,myTeam:C,myData:b,skillQueue:w,tempQueue:T},Q=function(e){this.selectedSkill=e},j={setSkill:Q},M={},B={data:function(){return{selectedSkill:{}}},components:_,computed:S,methods:j,watchers:M,created:function(){var e=this;this.$eventBus.$on("set-target",(function(t){var s=e.$store.getters["game/getBattleRoom"];s.send("add-skill-to-queue",Object(c["a"])(Object(c["a"])({},e.selectedSkill),{},{target:t}))}))}},E=B,P=(s("14d0"),Object(g["a"])(E,n,a,!1,null,null,null)),D=P.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"enemy"},e._l(e.enemyTeam,(function(e,t){return s("CharFace",{key:t,attrs:{char:e,index:t}})})),1)},G=[],I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return!1!==e.char?s("section",{staticClass:"enemy-char"},[e._l(e.tempQueue(e.index).reverse(),(function(t,i){return s("img",{key:i,staticClass:"tempSkill",attrs:{src:"/img/game/"+e.skill(t.caster,t.skill).skillpic+".jpg"},on:{dblclick:function(s){return e.removeFromTempQueue(t)}}})})),e._l(e.skillQueue(e.char.id).reverse(),(function(t,i){return s("img",{key:i,staticClass:"tempSkill",attrs:{src:"/img/game/"+t.skillpic+".jpg"},on:{dblclick:function(s){return e.removeFromTempQueue(t)}}})})),s("div",{staticClass:"enemy-char-status"},[s("div",{staticClass:"enemy-icon"},[e.isTarget.isTarget?s("img",{staticClass:"pulsate",attrs:{src:"/img/game/"+e.char.facepic+".jpg"},on:{click:function(t){return e.selectTarget()}}}):e._e(),s("img",{class:{fainted:e.char.knockedOut},attrs:{src:"/img/game/"+e.char.facepic+".jpg"}})]),s("div",{staticClass:"enemy-hp"},[s("div",{staticClass:"enemy-hp-value"},[e._v(e._s(e.char.hitPoints))]),s("div",{staticClass:"enemy-hp-gauge",style:"width: "+e.char.hitPoints+"%"})])])],2):e._e()},O=[],q={props:["char","index"],methods:{selectTarget:function(){this.$eventBus.$emit("set-target",this.index),this.$store.commit("game/setSkillInFocus",{}),this.$store.commit("game/resetTargetables")},removeFromTempQueue:function(e){var t=this.$store.getters["game/getBattleRoom"];t.send("remove-skill-from-queue",e)}},computed:{isTarget:function(){return this.$store.getters["game/getCharacterByIndex"](this.index)},tempQueue:function(){return this.$store.getters["game/getTempQueueByCharacter"]},skill:function(){return this.$store.getters["game/getSkillByCaster"]},skillQueue:function(){return this.$store.getters["game/getSkillQueueById"]}}},R=q,U=(s("b9f7"),Object(g["a"])(R,I,O,!1,null,null,null)),A=U.exports,J={CharFace:A},L=function(){var e=this.$store.getters["user/getUserData"].id;return this.$store.getters["game/getEnemyCharList"](e)},V={enemyTeam:L},z={},H={},K={data:function(){return{}},components:J,computed:V,methods:z,watchers:H},N=K,W=(s("8c75"),Object(g["a"])(N,F,G,!1,null,null,null)),X=W.exports,Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"viewer"},[s("img",{staticClass:"viewer-img",attrs:{src:"/img/game/"+e.data.skillpic+".jpg"}}),s("div",{staticClass:"viewer-description"},[s("h1",[e._v(e._s(e.data.name))]),s("p",[e._v(e._s(e.data.description))]),s("p",[e._v("cost: "),e._l(e.costs,(function(e,t){return s("span",{key:t,class:"viewer-energy "+e})}))],2)])])},Z=[],ee={},te=function(){for(var e=["speed","strength","elemental","wisdom","random"],t=[],s=0;s<e.length;s++)for(var i=0;i<this.data.cost[s];i++)t.push(e[s]);return t},se={costs:te},ie={},re={},ne={data:function(){return{data:{}}},components:ee,computed:se,methods:ie,watchers:re,created:function(){var e=this;this.$eventBus.$on("selected-a-skill",(function(t){e.data=t}))}},ae=ne,ce=(s("5259"),Object(g["a"])(ae,Y,Z,!1,null,null,null)),le=ce.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cart",on:{click:function(t){return t.target!==t.currentTarget?null:e.close(t)}}},[s("section",{staticClass:"cart-cart"},[s("table",[s("tr",[s("th",[e._v("Select "+e._s(e.queue[4])+" more energy to proceed")])]),e._l(e.energyPool.slice(0,4),(function(t,i){return s("tr",{key:i},[s("td",[e._v(" "+e._s(t)+" "),s("button",{on:{click:function(t){return e.pay(i)}}},[e._v("+")])]),s("td",[s("button",{on:{click:function(t){return e.refund(i)}}},[e._v("-")]),e._v(" "+e._s(e.paid[i])+" ")])])}))],2),s("div",{staticClass:"cart-skills"},e._l(e.tempQueue,(function(t,i){return s("img",{key:i,attrs:{src:"/img/game/"+e.skill(t.caster,t.skill).skillpic+".jpg"}})})),0),s("button",{on:{click:e.endturn}},[e._v("End turn")])])])},ue=[],me=(s("13d5"),s("a434"),{props:["queue"],data:function(){return{paid:[0,0,0,0],energy:["speed","strength","elemental","wisdom","random"]}},methods:{close:function(){this.$emit("close")},pay:function(e){0!==this.queue[4]&&(this.energyPool[e]<=0||(this.energyPool.splice(e,1,this.energyPool[e]-1),this.paid.splice(e,1,this.paid[e]+1)))},refund:function(e){0!==this.queue[4]&&(this.paid[e]<=0||(this.energyPool.splice(e,1,this.energyPool[e]+1),this.paid.splice(e,1,this.paid[e]-1)))},endturn:function(){var e=this.paid.reduce((function(e,t){return e+t}),0);if(e==this.queue[4]){var t=this.$store.getters["game/getBattleRoom"];t.send("end-game-turn",this.paid)}}},computed:{tempQueue:function(){return this.$store.getters["game/getTempQueue"]},skill:function(){return this.$store.getters["game/getSkillByCaster"]},energyPool:function(){var e=this.$store.state.user.id;return this.$store.getters["game/GetMyData"](e).energyPool}}}),ge=me,de=(s("bbe7"),Object(g["a"])(ge,oe,ue,!1,null,"6736c8f8",null)),he=de.exports,fe={MyTeam:D,EnergyCart:he,EnemyTeam:X,Viewer:le},pe=function(){return this.$store.state.game},ve=function(){var e=this.$store.state.user.id;return this.$store.getters["game/GetMyData"](e)},ye=function(){var e=this.$store.state.user.id;return this.$store.getters["game/GetMyData"](e).isTurn},ke=function(){return this.$store.getters["game/getTempQueue"]},$e={Game:pe,isTurn:ye,GetMyData:ve,tempSkillQueue:ke},_e=function(){if(this.tempSkillQueue.length>0)this.endturn=!0;else{var e=this.$store.getters["game/getBattleRoom"];e.send("end-game-turn")}},Ce=function(e){console.log(e)},be={endTurn:_e,viewerUpdate:Ce},Te=function(e){e||(this.endturn=!1)},xe={isTurn:Te},we={data:function(){return{energies:["speed","strength","elemental","wisdom"],endturn:!1}},components:fe,computed:$e,methods:be,watch:xe,created:function(){var e=this,t=this.$store.getters["game/getBattleRoom"];null!==t&&(t.onMessage("start-new-turn",(function(t){e.$store.commit("game/setGameState",t),e.GetMyData.isTurn?e.$store.commit("midori/setUpdate",{value:!0,index:0}):e.$store.commit("midori/setUpdate",{value:!0,index:1})})),t.onMessage("update-temp-queue",(function(t){e.$store.commit("game/setTempQueue",t),e.$store.commit("game/setPlayerEnergyPool",{playerIndex:t.playerIndex,energyPool:t.energyPool}),e.$store.commit("game/setPayupCart",{p:t.playerIndex,pay:t.payupCart})})))},mounted:function(){this.GetMyData.isTurn?this.$store.commit("midori/setUpdate",{value:!0,index:0}):this.$store.commit("midori/setUpdate",{value:!0,index:1})},beforeDestroy:function(){this.$store.commit("game/setRoom",null)}},Se=we,Qe=(s("1ca1"),Object(g["a"])(Se,i,r,!1,null,null,null));t["default"]=Qe.exports},b9f7:function(e,t,s){"use strict";var i=s("77bb"),r=s.n(i);r.a},bbe7:function(e,t,s){"use strict";var i=s("0571"),r=s.n(i);r.a},d317:function(e,t,s){},d58f:function(e,t,s){var i=s("1c0b"),r=s("7b0b"),n=s("44ad"),a=s("50c4"),c=function(e){return function(t,s,c,l){i(s);var o=r(t),u=n(o),m=a(o.length),g=e?m-1:0,d=e?-1:1;if(c<2)while(1){if(g in u){l=u[g],g+=d;break}if(g+=d,e?g<0:m<=g)throw TypeError("Reduce of empty array with no initial value")}for(;e?g>=0:m>g;g+=d)g in u&&(l=s(l,u[g],g,o));return l}};e.exports={left:c(!1),right:c(!0)}}}]);
//# sourceMappingURL=chunk-5fc39eae.eba94f4c.js.map